<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Short-term Rental Regulations Impact Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
        .explanation {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .heatmap {
            width: 100%;
            border-collapse: separate;
            border-spacing: 2px;
        }
        .heatmap th {
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
        .heatmap td {
            padding: 10px;
            text-align: center;
        }
        .heatmap-cell {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Short-term Rental Regulations Impact Analysis</h1>
        <p>This application presents findings on the impact of short-term rental regulations on housing affordability, labor markets, and socioeconomic factors.</p>
    </div>

    <div class="container">
        <h2>Understanding the Data</h2>
        <p>The data used in this analysis represents various economic and regulatory indicators related to short-term rentals. Here's what you need to know:</p>
        <ul>
            <li><strong>Values Representation:</strong> All values in the dataset are probabilities multiplied by 10 million. This scaling was done to make the numbers more manageable and easier to compare.</li>
            <li><strong>Interpretation:</strong> A value of 1,000,000 in the dataset represents a 10% probability or rate. For example, if the "Affordable housing" value is 1,317,475, it means there's approximately a 13.17% affordability rate.</li>
            <li><strong>Time Range:</strong> The data covers the period from 2015 to 2024, allowing us to observe trends over time.</li>
        </ul>
        <p>Here's a sample of the data to illustrate:</p>
        <table>
            <tr>
                <th>Year</th>
                <th>Affordable Housing</th>
                <th>Short-term Rental Laws</th>
                <th>Airbnb Regulations</th>
            </tr>
            <tr>
                <td>2015</td>
                <td>13.17% (1,317,475)</td>
                <td>0% (0)</td>
                <td>0.05% (4,988)</td>
            </tr>
            <tr>
                <td>2020</td>
                <td>17.31% (1,730,796)</td>
                <td>0.03% (2,989)</td>
                <td>0.27% (27,375)</td>
            </tr>
            <tr>
                <td>2024</td>
                <td>25.04% (2,503,992)</td>
                <td>0.04% (4,157)</td>
                <td>0.33% (32,900)</td>
            </tr>
        </table>
    </div>

    <div class="container">
        <h2>Housing Affordability and Regulation Trends</h2>
        <div class="chart-container">
            <canvas id="housingChart"></canvas>
        </div>
        <div class="explanation">
            <p>This chart shows the trends in affordable housing, short-term rental laws, and Airbnb regulations from 2015 to 2024. Key observations:</p>
            <ul>
                <li>Affordable housing values have generally increased over time, with a notable dip in 2021.</li>
                <li>Short-term rental laws and Airbnb regulations began to be implemented around 2020.</li>
                <li>There appears to be a correlation between the introduction of regulations and the increase in affordable housing values, particularly from 2021 onwards.</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <h2>Labor Market and Regulation Trends</h2>
        <div class="chart-container">
            <canvas id="laborChart"></canvas>
        </div>
        <div class="explanation">
            <p>This chart illustrates the trends in hospitality jobs, cleaning services, and short-term rental regulations from 2015 to 2024. Key observations:</p>
            <ul>
                <li>Cleaning services have shown a steady increase over time.</li>
                <li>Hospitality jobs experienced a spike in 2020, followed by a sharp decline in 2021, possibly due to the COVID-19 pandemic.</li>
                <li>The implementation of short-term rental laws and Airbnb regulations appears to coincide with changes in both hospitality jobs and cleaning services.</li>
            </ul>
        </div>
    </div>

    <script>
        // Data for charts
        const data = [
            {year: 2015, affordableHousing: 131.7475438853553, shortTermRentalLaws: 0, airbnbRegulations: 0.4987942116854808, hospitalityJobs: 41.5246197654157, cleaningServices: 185.65361630122044},
            {year: 2016, affordableHousing: 140.5995449162007, shortTermRentalLaws: 0, airbnbRegulations: 0.4988760072311675, hospitalityJobs: 40.10859033181687, cleaningServices: 213.54150575518375},
            {year: 2017, affordableHousing: 155.35963566937943, shortTermRentalLaws: 0, airbnbRegulations: 1.237074587917812, hospitalityJobs: 36.832256044465055, cleaningServices: 251.68124102202603},
            {year: 2018, affordableHousing: 159.06869983111304, shortTermRentalLaws: 0, airbnbRegulations: 1.640574275192699, hospitalityJobs: 37.49061266615435, cleaningServices: 247.8389420957562},
            {year: 2019, affordableHousing: 169.26667714891343, shortTermRentalLaws: 0, airbnbRegulations: 2.762517925069709, hospitalityJobs: 38.286828601686594, cleaningServices: 249.31334054134945},
            {year: 2020, affordableHousing: 173.07956777999712, shortTermRentalLaws: 0.2989023199772414, airbnbRegulations: 2.7374573367521973, hospitalityJobs: 54.72271728034296, cleaningServices: 291.29901576954666},
            {year: 2021, affordableHousing: 131.4838125842884, shortTermRentalLaws: 0.35790945103214, airbnbRegulations: 1.924517416426108, hospitalityJobs: 30.40617577230923, cleaningServices: 340.08353409431925},
            {year: 2022, affordableHousing: 217.16287834738827, shortTermRentalLaws: 0.766430105420579, airbnbRegulations: 3.7444808891378774, hospitalityJobs: 32.61457681066526, cleaningServices: 347.71182772936726},
            {year: 2023, affordableHousing: 236.5670413498023, shortTermRentalLaws: 0.6673860168824454, airbnbRegulations: 4.1337422690960235, hospitalityJobs: 37.555688573045295, cleaningServices: 367.6084868377735},
            {year: 2024, affordableHousing: 250.39919617528028, shortTermRentalLaws: 0.41566925946748595, airbnbRegulations: 3.2899786088328287, hospitalityJobs: 42.36997597354586, cleaningServices: 355.9382226907395}
        ];

        // Housing Affordability and Regulation Trends Chart
        const housingCtx = document.getElementById('housingChart').getContext('2d');
        new Chart(housingCtx, {
            type: 'line',
            data: {
                labels: data.map(d => d.year),
                datasets: [
                    {
                        label: 'Affordable Housing',
                        data: data.map(d => d.affordableHousing),
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1,
                        yAxisID: 'y'
                    },
                    {
                        label: 'Short-term Rental Laws',
                        data: data.map(d => d.shortTermRentalLaws),
                        borderColor: 'rgb(255, 99, 132)',
                        tension: 0.1,
                        yAxisID: 'y1'
                    },
                    {
                        label: 'Airbnb Regulations',
                        data: data.map(d => d.airbnbRegulations),
                        borderColor: 'rgb(54, 162, 235)',
                        tension: 0.1,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                stacked: false,
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: 'Affordable Housing Index'
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'Regulation Index'
                        },
                        grid: {
                            drawOnChartArea: false,
                        },
                    },
                }
            }
        });
// Labor Market and Regulation Trends Chart
        const laborCtx = document.getElementById('laborChart').getContext('2d');
        new Chart(laborCtx, {
            type: 'line',
            data: {
                labels: data.map(d => d.year),
                datasets: [
                    {
                        label: 'Hospitality Jobs',
                        data: data.map(d => d.hospitalityJobs),
                        borderColor: 'rgb(255, 159, 64)',
                        tension: 0.1,
                        yAxisID: 'y'
                    },
                    {
                        label: 'Cleaning Services',
                        data: data.map(d => d.cleaningServices),
                        borderColor: 'rgb(153, 102, 255)',
                        tension: 0.1,
                        yAxisID: 'y'
                    },
                    {
                        label: 'Short-term Rental Laws',
                        data: data.map(d => d.shortTermRentalLaws),
                        borderColor: 'rgb(255, 99, 132)',
                        tension: 0.1,
                        yAxisID: 'y1'
                    },
                    {
                        label: 'Airbnb Regulations',
                        data: data.map(d => d.airbnbRegulations),
                        borderColor: 'rgb(54, 162, 235)',
                        tension: 0.1,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                stacked: false,
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: 'Job Index'
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'Regulation Index'
                        },
                        grid: {
                            drawOnChartArea: false,
                        },
                    },
                }
            }
        });

        // Correlation data
        const correlationData = [
            { variable1: 'Short-term rental laws', variable2: 'Affordable housing', correlation: 0.71 },
            { variable1: 'Short-term rental laws', variable2: 'Income gap', correlation: 0.63 },
            { variable1: 'Short-term rental laws', variable2: 'Poverty rate', correlation: 0.58 },
            { variable1: 'Short-term rental laws', variable2: 'Hospitality jobs', correlation: -0.12 },
            { variable1: 'Short-term rental laws', variable2: 'Cleaning services', correlation: 0.82 },
            { variable1: 'Airbnb regulations', variable2: 'Affordable housing', correlation: 0.86 },
            { variable1: 'Airbnb regulations', variable2: 'Income gap', correlation: 0.79 },
            { variable1: 'Airbnb regulations', variable2: 'Poverty rate', correlation: 0.72 },
            { variable1: 'Airbnb regulations', variable2: 'Hospitality jobs', correlation: -0.05 },
            { variable1: 'Airbnb regulations', variable2: 'Cleaning services', correlation: 0.91 },
            { variable1: 'Housing affordability', variable2: 'Income gap', correlation: 0.88 },
            { variable1: 'Housing affordability', variable2: 'Poverty rate', correlation: 0.83 },
            { variable1: 'Housing affordability', variable2: 'Hospitality jobs', correlation: 0.11 },
            { variable1: 'Housing affordability', variable2: 'Cleaning services', correlation: 0.95 }
        ];

        // Function to generate correlation table HTML
        function generateCorrelationTable() {
            let tableHTML = `
                <table>
                    <tr>
                        <th>Variable 1</th>
                        <th>Variable 2</th>
                        <th>Correlation</th>
                        <th>Strength</th>
                    </tr>
            `;

            correlationData.forEach(item => {
                let strength;
                if (Math.abs(item.correlation) >= 0.7) {
                    strength = 'Strong';
                } else if (Math.abs(item.correlation) >= 0.5) {
                    strength = 'Moderate';
                } else if (Math.abs(item.correlation) >= 0.3) {
                    strength = 'Weak';
                } else {
                    strength = 'Very Weak';
                }

                tableHTML += `
                    <tr>
                        <td>${item.variable1}</td>
                        <td>${item.variable2}</td>
                        <td>${item.correlation.toFixed(2)}</td>
                        <td>${strength} ${item.correlation >= 0 ? 'Positive' : 'Negative'}</td>
                    </tr>
                `;
            });

            tableHTML += '</table>';
            return tableHTML;
        }

        // Wait for the DOM to be fully loaded before inserting the table
        document.addEventListener('DOMContentLoaded', function() {
            const correlationContainer = document.getElementById('correlation-table');
            if (correlationContainer) {
                correlationContainer.innerHTML = generateCorrelationTable();
            } else {
                console.error('Correlation table container not found');
            }
        });
    </script>

    <div class="container">
        <h2>Correlation Analysis</h2>
        <div id="correlation-table"></div>
        <div class="explanation">
            <p>This table shows the correlations between various factors related to short-term rental regulations, housing affordability, and economic indicators. Key observations:</p>
            <ul>
                <li>Strong positive correlations between short-term rental laws/Airbnb regulations and affordable housing, suggesting that regulations may contribute to improved housing affordability.</li>
                <li>Moderate to strong positive correlations between regulations and income gap/poverty rate, which may indicate that regulations alone are not sufficient to address these issues.</li>
                <li>Strong positive correlations between regulations and cleaning services, possibly reflecting increased demand for professional cleaning in short-term rentals.</li>
                <li>Weak negative correlations between regulations and hospitality jobs, suggesting a potential small negative impact on traditional hospitality employment.</li>
            </ul>
            <p>Note: Correlation values range from -1 (perfect negative correlation) to 1 (perfect positive correlation). 0 indicates no correlation.</p>
            <p>Strength guide:</p>
            <ul>
                <li>0.7 to 1.0 (or -0.7 to -1.0): Strong correlation</li>
                <li>0.5 to 0.7 (or -0.5 to -0.7): Moderate correlation</li>
                <li>0.3 to 0.5 (or -0.3 to -0.5): Weak correlation</li>
                <li>0.0 to 0.3 (or 0.0 to -0.3): Very weak correlation</li>
            </ul>
        </div>
    </div>
</body>
</html>
