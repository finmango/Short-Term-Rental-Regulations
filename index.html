<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Short-term Rental Regulations Impact Analysis (2010-2024)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1, h2 {
            color: #2c3e50;
        }
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
            margin-bottom: 30px;
        }
        .explanation {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Short-term Rental Regulations Impact Analysis (2010-2024)</h1>
        <p>This analysis examines Google search trends related to short-term rental regulations, income inequality, poverty, and local community impacts over a 15-year period.</p>
    </div>

    <div class="container">
        <h2>Understanding the Data</h2>
        <p>The data represents Google search query volumes for various terms related to short-term rentals, income inequality, poverty, and local community impacts from 2010 to 2024. Key points:</p>
        <ul>
            <li><strong>Data Source:</strong> Google Trends API, providing raw, non-normalized data.</li>
            <li><strong>Data Format:</strong> Values represent the probability of a search term multiplied by 10 million.</li>
            <li><strong>Geographical Scope:</strong> Data covers the entire United States.</li>
            <li><strong>Time Resolution:</strong> Monthly data points from 2010 to 2024.</li>
            <li><strong>Interpretation:</strong> Higher values indicate a greater probability of the term being searched relative to all US-based searches in that month.</li>
        </ul>
    </div>

    <div class="container">
        <h2>Short-term Rental Regulations and Housing Affordability</h2>
        <div class="chart-container">
            <canvas id="regulationsChart"></canvas>
        </div>
        <div class="explanation" id="regulationsExplanation"></div>
    </div>

    <script>
    const rawData = [
        // The data you provided is already included here
    ];

    const data = [];

    function processData() {
        rawData.forEach(row => {
            const date = new Date(row.Date);
            const year = date.getFullYear();
            const month = date.getMonth();
            const term = row.Term;
            const value = parseFloat(row.Value);

            let yearData = data.find(d => d.year === year);
            if (!yearData) {
                yearData = { year: year };
                data.push(yearData);
            }

            if (!yearData[term]) {
                yearData[term] = new Array(12).fill(0);
            }
            yearData[term][month] = value;
        });

        data.sort((a, b) => a.year - b.year);
    }

    function createRegulationsChart() {
        const ctx = document.getElementById('regulationsChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.map(d => d.year),
                datasets: [
                    {
                        label: 'Short-term Rental Laws',
                        data: data.map(d => d['Short-term rental laws'] ? d['Short-term rental laws'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(255, 99, 132)',
                        tension: 0.1
                    },
                    {
                        label: 'Airbnb Regulations',
                        data: data.map(d => d['Airbnb regulations'] ? d['Airbnb regulations'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(54, 162, 235)',
                        tension: 0.1
                    },
                    {
                        label: 'Affordable Housing',
                        data: data.map(d => d['Affordable housing'] ? d['Affordable housing'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Average Annual Search Probability (x10^-7)'
                        }
                    }
                }
            }
        });

        document.getElementById('regulationsExplanation').innerHTML = `
            <p>This chart shows the trends in search interest for short-term rental laws, Airbnb regulations, and affordable housing from 2010 to 2024. Key observations:</p>
            <ul>
                <li>Search interest in affordable housing has generally increased over the 15-year period, indicating growing public concern or awareness.</li>
                <li>Interest in short-term rental laws and Airbnb regulations began to appear in searches around 2015, with significant increases after 2020.</li>
                <li>The rise in searches for regulatory terms may reflect increasing public awareness of policy changes or debates surrounding short-term rentals.</li>
                <li>There appears to be a correlation between the rise in regulatory searches and affordable housing searches, suggesting a potential relationship between these topics in public discourse.</li>
            </ul>
        `;
    }

    function initAnalysis() {
        processData();
        createRegulationsChart();
    }

    window.onload = initAnalysis;
    </script>
</body>
</html>
<div class="container">
        <h2>Income Inequality and Poverty Trends</h2>
        <div class="chart-container">
            <canvas id="inequalityChart"></canvas>
        </div>
        <div class="explanation" id="inequalityExplanation"></div>
    </div>

    <div class="container">
        <h2>Local Community Impact</h2>
        <div class="chart-container">
            <canvas id="communityChart"></canvas>
        </div>
        <div class="explanation" id="communityExplanation"></div>
    </div>

    <script>
    // ... (previous code remains the same)

    function createInequalityChart() {
        const ctx = document.getElementById('inequalityChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.map(d => d.year),
                datasets: [
                    {
                        label: 'Income Gap',
                        data: data.map(d => d['Income gap'] ? d['Income gap'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(255, 99, 132)',
                        tension: 0.1
                    },
                    {
                        label: 'Wealth Disparity',
                        data: data.map(d => d['Wealth disparity'] ? d['Wealth disparity'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(54, 162, 235)',
                        tension: 0.1
                    },
                    {
                        label: 'Poverty Rate',
                        data: data.map(d => d['Poverty rate'] ? d['Poverty rate'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    },
                    {
                        label: 'Economic Inequality',
                        data: data.map(d => d['Economic inequality'] ? d['Economic inequality'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(255, 159, 64)',
                        tension: 0.1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Average Annual Search Probability (x10^-7)'
                        }
                    }
                }
            }
        });

        document.getElementById('inequalityExplanation').innerHTML = `
            <p>This chart illustrates the trends in search interest for income gap, wealth disparity, poverty rate, and economic inequality from 2010 to 2024. Key observations:</p>
            <ul>
                <li>Search interest in poverty rate has shown the highest overall level and variability among these terms.</li>
                <li>Interest in economic inequality and income gap have generally increased over time, particularly after 2020.</li>
                <li>Wealth disparity searches show a more modest increase but follow a similar trend to other inequality-related terms.</li>
                <li>These trends suggest growing public awareness or concern about economic disparities and poverty issues over the 15-year period.</li>
            </ul>
        `;
    }

    function createCommunityChart() {
        const ctx = document.getElementById('communityChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.map(d => d.year),
                datasets: [
                    {
                        label: 'Neighborhood Changes',
                        data: data.map(d => d['Neighborhood changes'] ? d['Neighborhood changes'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(255, 99, 132)',
                        tension: 0.1
                    },
                    {
                        label: 'Community Displacement',
                        data: data.map(d => d['Community displacement'] ? d['Community displacement'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(54, 162, 235)',
                        tension: 0.1
                    },
                    {
                        label: 'Local Business Impact',
                        data: data.map(d => d['Local business impact'] ? d['Local business impact'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    },
                    {
                        label: 'Tourism Effects',
                        data: data.map(d => d['Tourism effects'] ? d['Tourism effects'].reduce((a, b) => a + b, 0) / 12 : 0),
                        borderColor: 'rgb(255, 159, 64)',
                        tension: 0.1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Average Annual Search Probability (x10^-7)'
                        }
                    }
                }
            }
        });

        document.getElementById('communityExplanation').innerHTML = `
            <p>This chart shows the trends in search interest for neighborhood changes, community displacement, local business impact, and tourism effects from 2010 to 2024. Key observations:</p>
            <ul>
                <li>Search interest in local business impact and tourism effects has shown the most significant increase over time.</li>
                <li>Neighborhood changes and community displacement searches have remained relatively low but show a slight upward trend in recent years.</li>
                <li>The increase in these searches may reflect growing public awareness of the potential impacts of short-term rentals on local communities.</li>
                <li>The trends suggest that the economic aspects (business and tourism) of short-term rentals have garnered more public attention than social aspects (neighborhood changes and displacement).</li>
            </ul>
        `;
    }

    function initAnalysis() {
        processData();
        createRegulationsChart();
        createInequalityChart();
        createCommunityChart();
    }

    window.onload = initAnalysis;
    </script>
</body>
</html>
